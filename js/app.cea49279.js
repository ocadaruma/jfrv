(function(){"use strict";var e={5258:function(e,t,a){var n=a(9963),l=a(6252);function o(e,t){const a=(0,l.up)("router-view");return(0,l.wg)(),(0,l.iD)("div",null,[(0,l.Wm)(a,null,{default:(0,l.w5)((({Component:e})=>[((0,l.wg)(),(0,l.j4)(l.Ob,null,[((0,l.wg)(),(0,l.j4)((0,l.LL)(e)))],1024))])),_:1})])}var r=a(3744);const i={},s=(0,r.Z)(i,[["render",o]]);var u=s,d=a(2201),c=(a(8675),a(3462),a(7380),a(1118),a(2262)),f=a(3577),h=a(6209),v=a(9118);const p=e=>((0,l.dD)("data-v-77365734"),e=e(),(0,l.Cn)(),e),b={class:"font-mono"},m={class:"h-12 fixed top-0 left-0 z-50 w-full bg-white border-b border-slate-400"},g={class:"h-8 m-2 flex space-x-2"},w=p((()=>(0,l._)("span",{class:"align-middle"},"execution sample",-1))),x=p((()=>(0,l._)("span",{class:"align-middle"},"JFR query (experimental)",-1))),_=p((()=>(0,l._)("span",{class:"align-middle"},"offcpu (jvm-blocking-monitor)",-1))),y=p((()=>(0,l._)("a",{href:"https://github.com/ocadaruma/jfrv",target:"_blank",class:"absolute h-7 border-2 border-slate-500 pl-2 pr-2 right-2"},"ðŸ“– docs",-1))),k={class:"fixed top-12 left-0 right-0 bottom-0"};function S(e,t){const a=(0,l.up)("router-link");return(0,l.wg)(),(0,l.iD)("div",b,[(0,l._)("div",m,[(0,l._)("nav",g,[(0,l.Wm)(a,{to:"/execution-sample",class:"hover:bg-slate-300 flex-none pl-2 pr-2 h-7 text-sm text-center border-2 rounded border-slate-400"},{default:(0,l.w5)((()=>[w])),_:1}),(0,l.Wm)(a,{to:"/jfr-query",class:"hover:bg-slate-300 flex-none pl-2 pr-2 h-7 text-sm text-center border-2 rounded border-slate-400"},{default:(0,l.w5)((()=>[x])),_:1}),(0,l.Wm)(a,{to:"/jbm",class:"hover:bg-slate-300 flex-none pl-2 pr-2 h-7 text-sm text-center border-2 rounded border-slate-400"},{default:(0,l.w5)((()=>[_])),_:1}),y])]),(0,l._)("div",k,[(0,l.WI)(e.$slots,"default",{},void 0,!0)])])}const j={},C=(0,r.Z)(j,[["render",S],["__scopeId","data-v-77365734"]]);var H=C,R=a(2482);a(2801);const U="__flame_graph__",M={chartId:"flame-graph",highlightId:"highlight",highlightTextId:"highlight-text",statusId:"status",font:"12px Verdana, sans-serif",colorPalette:{Interpreted:{baseHex:11723186,rMix:20,gMix:20,bMix:20},JitCompiled:{baseHex:5300560,rMix:30,gMix:30,bMix:30},Inlined:{baseHex:5295308,rMix:30,gMix:30,bMix:30},Native:{baseHex:14768730,rMix:30,gMix:40,bMix:40},Cpp:{baseHex:13158460,rMix:30,gMix:30,bMix:10},Kernel:{baseHex:14777600,rMix:30,gMix:30,bMix:0},C1Compiled:{baseHex:13428864,rMix:20,gMix:20,bMix:20},Unknown:{baseHex:0,rMix:0,gMix:0,bMix:0}}};class W{constructor(e,t){(0,R.Z)(this,"delegate",void 0),(0,R.Z)(this,"objectElement",void 0),this.delegate=e,this.objectElement=t}static open(e){const t=`/jfrv/${nt.resolve({name:"flame-graph"}).href}`,a=window.open(t,"_blank");a&&(a.onload=()=>{const t=a.document.createElement("object");t.type="application/json",t.data=`data:application/json;base64,${btoa(JSON.stringify(e))}`,t.id=U,t.style.display="none",a.document.body.appendChild(t)})}static async flameGraph(){const e=window.document.getElementById(U),t=await fetch(e.data),a=await t.json();return a}}const z={class:"fixed top-12 left-0 right-0 h-12 bg-neutral-100 z-40 border-b border-slate-400 p-2"},D=(0,l._)("span",{class:"h-7 ml-2"},"thread name:",-1),I=(0,l._)("span",{class:"h-7 ml-2"},"stack trace:",-1),B=(0,l._)("span",{class:"h-7 ml-2"},"&& !",-1),E=["disabled"],F={class:"fixed top-24 left-0 right-0 h-8 bg-neutral-50 z-40 border-b border-slate-400 p-0.5"},O=["disabled"],$=["disabled"],P=["disabled"],T=(0,l._)("span",{id:"time-label",class:"text-xs relative hidden",style:{transform:"translateX(-100%)"}},null,-1),A=[T],q={class:"absolute top-20 right-0 left-0 bottom-0"},X={class:"w-full h-full"},Z={key:0},V={key:0},L={key:1},N={class:"w-full h-full"},G={class:"p-2"},J={class:"h-full p-2 overflow-auto"},K={class:"table-auto whitespace-nowrap"},Y=(0,l._)("td",{class:"text-right"},"timestamp :",-1),Q=(0,l._)("td",{class:"text-right"},"os thread id :",-1),ee={key:0,class:"fixed w-72 h-24 bg-neutral-200 border-neutral-500 p-2 border-2 top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2"},te={key:1,class:"fixed w-72 h-24 bg-neutral-200 border-neutral-500 p-2 border-2 top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2"};var ae=(0,l.aZ)({__name:"ExecutionSample",setup(e){const t={defaultMargin:1,fontSize:14,headerConfig:{borderWidth:1,borderColorRgbHex:7368816,elementId:"header",paneId:"header-pane",overlayElementId:"header-overlay"},sampleViewConfig:{elementId:"thread-chart-sample-view",paneId:"chart-pane",overlayElementId:"chart-overlay",sampleRenderSize:{width:6,height:8},backgroundRgbHex:16119285},threadStateColorConfig:{stateRunnableRgbHex:7125534,stateSleepingRgbHex:8737986,stateUnknownRgbHex:7302514,stateHiddenRgbHex:12895428},overlayConfig:{rowHighlightArgbHex:1077952576,sampleHighlightRgbHex:15745140,timestampStrokeWidth:.5},axisConfig:{labelElementId:"time-label"}},o=(0,c.iH)(),r=(0,c.iH)(),i=(0,c.iH)(),s=(0,c.iH)(),u=(0,c.iH)(),d=(0,c.iH)(),p=(0,c.iH)(),b=(0,c.iH)(),m=(0,c.iH)(),g=(0,c.iH)(),w=(0,c.iH)(),x=(0,c.iH)(),_=(0,c.iH)(),y=(0,c.iH)(),k=(0,c.iH)(),{getRootProps:S,getInputProps:j,isDragActive:C,open:R}=(0,v.u)({onDrop:re,multiple:!1,noClick:!0,noKeyboard:!0,accept:[".jfr",".gz"]});function U(e){return void 0!==e&&e?.length>0?e:null}function T(){_.value&&o.value?.apply_filter({threadNameRegex:U(g.value),stackTraceMatchRegex:U(w.value),stackTraceRejectRegex:U(x.value)})}function ae(){r.value=o.value?.on_chart_click()}function ne(e){o.value?.on_header_mouse_move(e.clientX-p.value.getBoundingClientRect().x,e.clientY-p.value.getBoundingClientRect().y)}function le(e){o.value?.on_chart_mouse_move(e.clientX-b.value.getBoundingClientRect().x,e.clientY-b.value.getBoundingClientRect().y)}function oe(){o.value?.on_mouse_out()}async function re(e,t){_.value="loading";const a=e[0],n=await a.arrayBuffer(),l=new Uint8Array(n);await de(a.name,l)}async function ie(){_.value="loading";const e=await fetch("/jfrv/demo.jfr"),t=await e.arrayBuffer(),a=new Uint8Array(t);await de("demo.jfr",a)}async function se(e){let a=t.sampleViewConfig.sampleRenderSize.width*e;const n=8*t.sampleViewConfig.sampleRenderSize.width,l=1;a<l||a>n||(k.value=e,await(o.value?.change_scale(a)))}async function ue(){const e=await(o.value?.flame_graph(M));e&&W.open(e)}async function de(e,t){g.value=void 0,w.value=void 0,x.value=void 0;try{const a=e.endsWith(".gz")?"Gzip":"Uncompressed";o.value?.initialize(t,a),o.value?.render(),fe()}catch(a){throw _.value="failed",y.value=a?.toString(),a}document.title=`jfrv - ${e}`,_.value="loaded"}(0,l.bv)((async()=>{const e=await a.e(672).then(a.bind(a,7672));o.value=new e.Renderer(t),k.value=1,window.addEventListener("resize",fe)})),(0,l.Ah)((()=>{window.removeEventListener("resize",fe)}));const ce=e=>{const t=i.value?.$el,a=s.value?.$el;"header"===e&&(a.scrollTop=t.scrollTop),"chart"===e&&(t.scrollTop=a.scrollTop)},fe=()=>{const e=u.value,t=d.value,a=m.value;e&&t&&a&&(e.width=i.value?.$el.getBoundingClientRect().width,e.height=i.value?.$el.getBoundingClientRect().height,e.style.left=`${i.value?.$el.getBoundingClientRect().left}px`,e.style.top=`${i.value?.$el.getBoundingClientRect().top}px`,t.width=s.value?.$el.getBoundingClientRect().width,t.height=s.value?.$el.getBoundingClientRect().height,t.style.left=`${s.value?.$el.getBoundingClientRect().left}px`,t.style.top=`${s.value?.$el.getBoundingClientRect().top}px`,a.style.width=`${t.width}px`,a.style.left=t.style.left)};return(e,t)=>((0,l.wg)(),(0,l.j4)(H,null,{default:(0,l.w5)((()=>[(0,l._)("div",z,[(0,l._)("button",{class:"hover:bg-slate-300 w-24 h-7 text-sm text-center border-2 rounded border-slate-400",onClick:t[0]||(t[0]=(...e)=>(0,c.SU)(R)&&(0,c.SU)(R)(...e))},"open file"),(0,l._)("button",{class:"hover:bg-slate-300 w-24 h-7 text-sm text-center border-2 border-slate-500 absolute right-2",onClick:ie},"load demo"),D,(0,l.wy)((0,l._)("input",{class:"h-7",type:"text",placeholder:"regex","onUpdate:modelValue":t[1]||(t[1]=e=>g.value=e),onChange:T},null,544),[[n.nr,g.value]]),I,(0,l.wy)((0,l._)("input",{class:"h-7",type:"text",placeholder:"match regex","onUpdate:modelValue":t[2]||(t[2]=e=>w.value=e),onChange:T},null,544),[[n.nr,w.value]]),B,(0,l.wy)((0,l._)("input",{class:"h-7",type:"text",placeholder:"reject regex","onUpdate:modelValue":t[3]||(t[3]=e=>x.value=e),onChange:T},null,544),[[n.nr,x.value]]),(0,l._)("input",(0,f.vs)((0,l.F4)((0,c.SU)(j)())),null,16),(0,l._)("button",{class:"disabled:opacity-50 enabled:hover:bg-slate-300 w-8 h-7 ml-2 text-sm text-center border-2 rounded border-slate-400",onClick:ue,disabled:"loaded"!==_.value},"ðŸ”¥",8,E)]),(0,l._)("div",F,[(0,l._)("button",{class:"disabled:opacity-50 enabled:hover:bg-slate-300 w-12 h-5 ml-2 text-xs text-center border-2 border-slate-400",onClick:t[4]||(t[4]=e=>se(1)),disabled:"loaded"!==_.value},"reset",8,O),(0,l._)("button",{class:"disabled:opacity-50 enabled:hover:bg-slate-300 w-5 h-5 ml-2 text-xs text-center border-2 border-slate-400",onClick:t[5]||(t[5]=e=>se(k.value/1.5)),disabled:"loaded"!==_.value},"-",8,$),(0,l._)("button",{class:"disabled:opacity-50 enabled:hover:bg-slate-300 w-5 h-5 ml-2 text-xs text-center border-2 border-slate-400",onClick:t[6]||(t[6]=e=>se(1.5*k.value)),disabled:"loaded"!==_.value},"+",8,P),(0,l._)("div",{ref_key:"timeAxis",ref:m,id:"time-axis",class:"absolute z-10 top-0 h-full"},A,512)]),(0,l._)("canvas",{ref_key:"headerOverlay",ref:u,id:"header-overlay",class:"fixed pointer-events-none z-10",width:"0",height:"0"},null,512),(0,l._)("canvas",{ref_key:"chartOverlay",ref:d,id:"chart-overlay",class:"fixed pointer-events-none z-10",width:"0",height:"0"},null,512),(0,l._)("div",q,[(0,l.Wm)((0,c.SU)(h.F),(0,l.dG)({class:"default-theme text-sm",horizontal:""},(0,c.SU)(S)(),{onResize:t[10]||(t[10]=e=>fe())}),{default:(0,l.w5)((()=>[(0,l.Wm)((0,c.SU)(h.X),null,{default:(0,l.w5)((()=>[(0,l._)("div",X,[(0,l.Wm)((0,c.SU)(h.F),{vertical:"",onResize:t[9]||(t[9]=e=>fe())},{default:(0,l.w5)((()=>[(0,l.Wm)((0,c.SU)(h.X),{size:"25",class:"overflow-x-hidden overflow-y-auto scrollbar-none relative",onScroll:t[7]||(t[7]=e=>ce("header")),ref_key:"headerPane",ref:i,id:"header-pane"},{default:(0,l.w5)((()=>[((0,l.wg)(),(0,l.iD)("svg",{ref_key:"header",ref:p,id:"header",class:"absolute top-0 left-0",onMousemove:ne,onMouseout:oe,width:"0",height:"0"},null,544))])),_:1},512),(0,l.Wm)((0,c.SU)(h.X),{class:"overflow-auto relative",onScroll:t[8]||(t[8]=e=>ce("chart")),ref_key:"chartPane",ref:s,id:"chart-pane"},{default:(0,l.w5)((()=>[(0,l._)("canvas",{ref_key:"chart",ref:b,id:"thread-chart-sample-view",onMousemove:le,onMouseout:oe,onClick:ae,class:"bg-slate-100",width:"0",height:"0"},null,544),_.value?(0,l.kq)("",!0):((0,l.wg)(),(0,l.iD)("div",Z,[(0,c.SU)(C)?((0,l.wg)(),(0,l.iD)("p",V,"Drop here ...")):((0,l.wg)(),(0,l.iD)("p",L,'Drag & drop OR press "open file" to select JFR file'))]))])),_:1},512)])),_:1})])])),_:1}),(0,l.Wm)((0,c.SU)(h.X),{size:"40",class:"overflow-auto"},{default:(0,l.w5)((()=>[(0,l._)("div",N,[(0,l.Wm)((0,c.SU)(h.F),{vertical:""},{default:(0,l.w5)((()=>[(0,l.Wm)((0,c.SU)(h.X),{size:"75",class:"overflow-auto"},{default:(0,l.w5)((()=>[(0,l._)("div",G,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(r.value?.stackTrace.frames,((e,t)=>((0,l.wg)(),(0,l.iD)("div",{class:"flex flex-col space-x-2 text-sm",key:t},(0,f.zw)(e.name),1)))),128))])])),_:1}),(0,l.Wm)((0,c.SU)(h.X),null,{default:(0,l.w5)((()=>[(0,l._)("div",J,[(0,l._)("table",K,[(0,l._)("tbody",null,[(0,l._)("tr",null,[Y,(0,l._)("td",null,(0,f.zw)(r.value?.timestamp),1)]),(0,l._)("tr",null,[Q,(0,l._)("td",null,(0,f.zw)(r.value?.osThreadId),1)])])])])])),_:1})])),_:1})])])),_:1})])),_:1},16)]),"loading"===_.value?((0,l.wg)(),(0,l.iD)("div",ee,"Loading...")):(0,l.kq)("",!0),"failed"===_.value?((0,l.wg)(),(0,l.iD)("div",te,"Failed to load JFR: "+(0,f.zw)(y.value),1)):(0,l.kq)("",!0)])),_:1}))}});const ne=ae;var le=ne;const oe={class:"fixed top-12 left-0 right-0 h-12 bg-neutral-100 z-40 border-b border-slate-400 p-2"},re=(0,l._)("span",{class:"h-7 ml-2"},"thread name:",-1),ie=(0,l._)("div",{class:"flex flex-col space-x-2"},null,-1),se={class:"absolute top-12 right-0 left-0 bottom-0"},ue={class:"w-full h-full"},de={ref:"header-overlay",id:"jbm-header-overlay",class:"absolute top-0 left-0 pointer-events-none",width:"0",height:"0"},ce={ref:"chart-overlay",id:"jbm-chart-overlay",class:"absolute top-0 left-0 pointer-events-none",width:"0",height:"0"},fe={key:0},he={key:0},ve={key:1},pe={class:"w-full h-full"},be={class:"p-2"},me={class:"h-full p-2 overflow-auto"},ge={class:"table-auto whitespace-nowrap"},we=(0,l._)("td",{class:"text-right"},"thread :",-1),xe=(0,l._)("td",{class:"text-right"},"offcpu start :",-1),_e=(0,l._)("td",{class:"text-right"},"offcpu end :",-1),ye=(0,l._)("td",{class:"text-right"},"duration (ms) :",-1),ke={key:0,class:"fixed w-72 h-24 bg-neutral-200 border-neutral-500 p-2 border-2 top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2"};var Se=(0,l.aZ)({__name:"JvmBlockingMonitor",setup(e){const t={defaultMargin:1,fontSize:14,headerConfig:{borderWidth:1,borderColorRgbHex:7368816,elementId:"jbm-header",overlayElementId:"jbm-header-overlay"},sampleViewConfig:{elementId:"jbm-thread-chart-sample-view",overlayElementId:"jbm-chart-overlay",sampleRenderHeight:8,sampleWidthPerHour:256,backgroundRgbHex:16119285},threadStateColorConfig:{stateRunnableRgbHex:7125534,stateSleepingRgbHex:8737986,stateUnknownRgbHex:7302514},overlayConfig:{rowHighlightArgbHex:1077952576,sampleHighlightRgbHex:15745140}},o=(0,c.iH)(),r=(0,c.iH)(),i=(0,c.iH)(),s=(0,c.iH)(),u=(0,c.iH)(),d=(0,c.iH)(),p=(0,c.iH)(),b=(0,c.iH)(),{getRootProps:m,getInputProps:g,isDragActive:w,open:x}=(0,v.u)({onDrop:C,multiple:!1,noClick:!0,noKeyboard:!0});function _(){b.value&&(void 0!==p.value&&p.value?.length>0?o.value?.apply_filter({threadNameRegex:p.value}):o.value?.apply_filter({threadNameRegex:null}))}function y(){r.value=o.value?.on_chart_click()}function k(e){o.value?.on_header_mouse_move(e.clientX-u.value.getBoundingClientRect().x,e.clientY-u.value.getBoundingClientRect().y)}function S(e){o.value?.on_chart_mouse_move(e.clientX-d.value.getBoundingClientRect().x,e.clientY-d.value.getBoundingClientRect().y)}function j(){o.value?.on_mouse_out()}async function C(e,t){b.value="loading";const a=await e[0].arrayBuffer(),n=new Uint8Array(a);await U(n)}async function R(){b.value="loading";const e=await fetch("/jfrv/jbm.log"),t=await e.arrayBuffer(),a=new Uint8Array(t);await U(a)}async function U(e){p.value=void 0;try{o.value?.initialize(e),o.value?.render()}catch(t){throw b.value=void 0,t}b.value="loaded"}(0,l.bv)((async()=>{const e=await a.e(672).then(a.bind(a,7672));o.value=new e.JbmRenderer(t)}));const M=e=>{const t=i.value?.$el,a=s.value?.$el;"header"===e&&(a.scrollTop=t.scrollTop),"chart"===e&&(t.scrollTop=a.scrollTop)};return(e,t)=>((0,l.wg)(),(0,l.j4)(H,null,{default:(0,l.w5)((()=>[(0,l._)("div",oe,[(0,l._)("button",{class:"hover:bg-slate-300 w-24 h-7 text-sm text-center border-2 rounded border-slate-400",onClick:t[0]||(t[0]=(...e)=>(0,c.SU)(x)&&(0,c.SU)(x)(...e))},"open file"),(0,l._)("button",{class:"hover:bg-slate-300 w-24 h-7 text-sm text-center border-2 border-slate-500 absolute right-2",onClick:R},"load demo"),re,(0,l.wy)((0,l._)("input",{class:"h-7",type:"text",placeholder:"regex","onUpdate:modelValue":t[1]||(t[1]=e=>p.value=e),onChange:_},null,544),[[n.nr,p.value]]),(0,l._)("input",(0,f.vs)((0,l.F4)((0,c.SU)(g)())),null,16),ie]),(0,l._)("div",se,[(0,l.Wm)((0,c.SU)(h.F),(0,l.dG)({class:"default-theme text-sm",horizontal:""},(0,c.SU)(m)()),{default:(0,l.w5)((()=>[(0,l.Wm)((0,c.SU)(h.X),null,{default:(0,l.w5)((()=>[(0,l._)("div",ue,[(0,l.Wm)((0,c.SU)(h.F),{vertical:""},{default:(0,l.w5)((()=>[(0,l.Wm)((0,c.SU)(h.X),{size:"25",class:"overflow-x-hidden overflow-y-auto scrollbar-none relative",onScroll:t[2]||(t[2]=e=>M("header")),ref_key:"headerPane",ref:i},{default:(0,l.w5)((()=>[(0,l._)("canvas",de,null,512),((0,l.wg)(),(0,l.iD)("svg",{ref_key:"header",ref:u,id:"jbm-header",class:"absolute top-0 left-0",onMousemove:k,onMouseout:j,width:"0",height:"0"},null,544))])),_:1},512),(0,l.Wm)((0,c.SU)(h.X),{class:"overflow-auto relative",onScroll:t[3]||(t[3]=e=>M("chart")),ref_key:"chartPane",ref:s},{default:(0,l.w5)((()=>[(0,l._)("canvas",ce,null,512),(0,l._)("canvas",{ref_key:"chart",ref:d,id:"jbm-thread-chart-sample-view",onMousemove:S,onMouseout:j,onClick:y,class:"bg-slate-100",width:"0",height:"0"},null,544),b.value?(0,l.kq)("",!0):((0,l.wg)(),(0,l.iD)("div",fe,[(0,c.SU)(w)?((0,l.wg)(),(0,l.iD)("p",he,"Drop here ...")):((0,l.wg)(),(0,l.iD)("p",ve,'Drag & drop OR press "open file" to select jbm log file'))]))])),_:1},512)])),_:1})])])),_:1}),(0,l.Wm)((0,c.SU)(h.X),{size:"40"},{default:(0,l.w5)((()=>[(0,l._)("div",pe,[(0,l.Wm)((0,c.SU)(h.F),{vertical:""},{default:(0,l.w5)((()=>[(0,l.Wm)((0,c.SU)(h.X),{size:"75",class:"overflow-auto"},{default:(0,l.w5)((()=>[(0,l._)("div",be,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(r.value?.stackTrace?.frames,((e,t)=>((0,l.wg)(),(0,l.iD)("div",{class:"flex flex-col space-x-2 text-sm",key:t},(0,f.zw)(e.name),1)))),128))])])),_:1}),(0,l.Wm)((0,c.SU)(h.X),null,{default:(0,l.w5)((()=>[(0,l._)("div",me,[(0,l._)("table",ge,[(0,l._)("tbody",null,[(0,l._)("tr",null,[we,(0,l._)("td",null,(0,f.zw)(r.value?.threadName),1)]),(0,l._)("tr",null,[xe,(0,l._)("td",null,(0,f.zw)(r.value?.offcpuStart),1)]),(0,l._)("tr",null,[_e,(0,l._)("td",null,(0,f.zw)(r.value?.offcpuEnd),1)]),(0,l._)("tr",null,[ye,(0,l._)("td",null,(0,f.zw)(r.value?.durationMillis),1)])])])])])),_:1})])),_:1})])])),_:1})])),_:1},16)]),"loading"===b.value?((0,l.wg)(),(0,l.iD)("div",ke,"Loading...")):(0,l.kq)("",!0)])),_:1}))}});const je=Se;var Ce=je;const He=e=>((0,l.dD)("data-v-787045bb"),e=e(),(0,l.Cn)(),e),Re=He((()=>(0,l._)("canvas",{id:"flame-graph"},null,-1))),Ue=He((()=>(0,l._)("div",{id:"highlight"},[(0,l._)("span",{id:"highlight-text"})],-1))),Me=He((()=>(0,l._)("p",{class:"mt-[5px] mr-0 mb-[5px] ml-0",id:"status"},null,-1))),We=[Re,Ue,Me];var ze=(0,l.aZ)({__name:"FlameGraph",setup(e){return(0,l.bv)((async()=>{window.addEventListener("load",(async()=>{const e=await a.e(672).then(a.bind(a,7672)),t=await W.flameGraph(),n=new e.FlameGraphRenderer(t,M);window.onmousemove=e=>{n.onmousemove(e)},window.onmouseout=e=>{n.onmouseout(e)},window.onclick=e=>{n.onclick(e)},n.render()}))})),(e,t)=>((0,l.wg)(),(0,l.iD)("div",{class:"m-0 p-[10px] bg-white",style:(0,f.j5)(`font: ${(0,c.SU)(M).font}`)},We,4))}});const De=(0,r.Z)(ze,[["__scopeId","data-v-787045bb"]]);var Ie=De,Be=a(3443),Ee=a(8773),Fe=a(8191),Oe=a(8139),$e=a(4413);const Pe={mvp:{mainModule:$e,mainWorker:new URL(a(3123),a.b).toString()}};class Te{constructor(){(0,R.Z)(this,"db",void 0),(0,R.Z)(this,"cid",void 0);const e=new Worker(Pe.mvp.mainWorker),t=new Oe.kw(Oe["in"].WARNING);this.db=new Oe.ak(t,e)}async init(){await this.db.instantiate(Pe.mvp.mainModule,Pe.mvp.mainWorker),this.cid=await this.db.connectInternal()}async query(e){return void 0===this.cid&&await this.init(),await this.db.runQuery(this.cid,e)}async registerFile(e,t){return await this.db.dropFile(e),this.db.registerFileBuffer(e,t)}getFile(e){return this.db.copyFileToBuffer(e)}}var Ae=a(6906),qe=a(4909);const Xe={class:"fixed top-12 left-0 right-0 h-12 bg-neutral-100 z-40 border-b border-slate-400 p-2"},Ze=["disabled"],Ve=(0,l._)("div",{class:"flex flex-col space-x-2"},null,-1),Le={class:"absolute top-12 right-0 left-0 bottom-0"},Ne={class:"w-full h-full overflow-auto"},Ge={class:"w-full h-full"},Je={key:0,class:"fixed w-72 h-24 bg-neutral-200 border-neutral-500 p-2 border-2 top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2"},Ke={key:1,class:"fixed w-72 h-24 bg-neutral-200 border-neutral-500 p-2 border-2 top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2"};var Ye=(0,l.aZ)({__name:"JfrQuery",setup(e){const t=(0,c.iH)(),a=(0,c.iH)(),n=(0,c.iH)(""),o=(0,c.iH)(),{getRootProps:r,getInputProps:i,isDragActive:s,open:u}=(0,v.u)({onDrop:p,multiple:!1,noClick:!0,noKeyboard:!0,accept:[".jfr"]});async function d(){t.value="executing";const e=await o.value.query(n.value).catch((e=>{throw t.value="loaded",e}));t.value="loaded";const l=Be.ZP.worker(),r=Ae.so.from(e.buffer),i=e=>"Bool"===e?"boolean":"Date"===e?"date":e.startsWith("Float")?"float":e.startsWith("Int")?"integer":e.startsWith("Timestamp")?"datetime":"string",s={},u=new qe.iA(r);u.schema.fields.forEach((e=>{const t=i(e.type.toString());t?s[e.name]=t:(console.info(`Fallback to string : ${e.type.toString()}`),s[e.name]="string")}));r.next();const d=await l.table(s);await(a.value?.load(d)),u.numRows>0&&d.update(e.buffer)}async function p(e,a){t.value="loading";const n=e[0],l=await n.arrayBuffer();await m(n.name,new Uint8Array(l))}async function b(){t.value="loading";const e=await fetch("/jfrv/demo.jfr"),a=await e.arrayBuffer(),n=new Uint8Array(a);await m("demo.jfr",n)}async function m(e,a){await(o.value?.registerFile(e,a).catch((e=>{throw t.value="failed",e}))),await(o.value?.query(`call jfr_attach('${e}')`).catch((e=>{throw t.value="failed",e}))),t.value="loaded"}return(0,l.bv)((async()=>{o.value=new Te,await(o.value?.init())})),(e,o)=>{const s=(0,l.up)("perspective-viewer");return(0,l.wg)(),(0,l.j4)(H,null,{default:(0,l.w5)((()=>[(0,l._)("div",Xe,[(0,l._)("button",{class:"hover:bg-slate-300 w-24 h-7 text-sm text-center border-2 rounded border-slate-400",onClick:o[0]||(o[0]=(...e)=>(0,c.SU)(u)&&(0,c.SU)(u)(...e))},"open file"),(0,l._)("button",{class:"disabled:opacity-50 enabled:hover:bg-slate-300 w-24 h-7 ml-2 text-sm text-center border-2 rounded border-slate-400",onClick:d,disabled:"loaded"!==t.value},"Run query",8,Ze),(0,l._)("button",{class:"hover:bg-slate-300 w-24 h-7 text-sm text-center border-2 border-slate-500 absolute right-2",onClick:b},"load demo"),(0,l._)("input",(0,f.vs)((0,l.F4)((0,c.SU)(i)())),null,16),Ve]),(0,l._)("div",Le,[(0,l.Wm)((0,c.SU)(h.F),(0,l.dG)({class:"default-theme text-sm",horizontal:""},(0,c.SU)(r)()),{default:(0,l.w5)((()=>[(0,l.Wm)((0,c.SU)(h.X),null,{default:(0,l.w5)((()=>[(0,l._)("div",Ne,[(0,l.Wm)((0,c.SU)(Ee.Z1),{modelValue:n.value,"onUpdate:modelValue":o[1]||(o[1]=e=>n.value=e),placeholder:"Enter query...",extensions:[(0,c.SU)(Fe.i6)()]},null,8,["modelValue","extensions"])])])),_:1}),(0,l.Wm)((0,c.SU)(h.X),{size:"50"},{default:(0,l.w5)((()=>[(0,l._)("div",Ge,[(0,l.Wm)(s,{class:"w-full h-full",ref_key:"queryViewer",ref:a,id:"query-viewer"},null,512)])])),_:1})])),_:1},16)]),"loading"===t.value?((0,l.wg)(),(0,l.iD)("div",Je,"Loading...")):(0,l.kq)("",!0),"executing"===t.value?((0,l.wg)(),(0,l.iD)("div",Ke,"Executing...")):(0,l.kq)("",!0)])),_:1})}}});const Qe=Ye;var et=Qe;const tt=[{path:"/",redirect:"/execution-sample"},{path:"/execution-sample",name:"execution-sample",component:le},{path:"/jbm",name:"jbm",component:Ce},{path:"/jfr-query",name:"jfr-query",component:et},{path:"/flame-graph",name:"flame-graph",component:Ie}],at=(0,d.p7)({history:(0,d.r5)("/jfrv/"),routes:tt});var nt=at,lt=(a(5109),a(7558),a(1210),a(1884));(0,n.ri)(u).use(nt).use(Ee.ZP,{extensions:[lt.Xy]}).mount("#app")}},t={};function a(n){var l=t[n];if(void 0!==l)return l.exports;var o=t[n]={id:n,loaded:!1,exports:{}};return e[n].call(o.exports,o,o.exports,a),o.loaded=!0,o.exports}a.m=e,function(){var e="function"===typeof Symbol?Symbol("webpack queues"):"__webpack_queues__",t="function"===typeof Symbol?Symbol("webpack exports"):"__webpack_exports__",n="function"===typeof Symbol?Symbol("webpack error"):"__webpack_error__",l=function(e){e&&!e.d&&(e.d=1,e.forEach((function(e){e.r--})),e.forEach((function(e){e.r--?e.r++:e()})))},o=function(a){return a.map((function(a){if(null!==a&&"object"===typeof a){if(a[e])return a;if(a.then){var o=[];o.d=0,a.then((function(e){r[t]=e,l(o)}),(function(e){r[n]=e,l(o)}));var r={};return r[e]=function(e){e(o)},r}}var i={};return i[e]=function(){},i[t]=a,i}))};a.a=function(a,r,i){var s;i&&((s=[]).d=1),s&&(s.moduleId=a.id);var u,d,c,f=new Set,h=a.exports,v=new Promise((function(e,t){c=t,d=e}));v[t]=h,v[e]=function(e){s&&e(s),f.forEach(e),v["catch"]((function(){}))},v.moduleId=a.id,a.exports=v,r((function(a){var l;u=o(a);var r=function(){return u.map((function(e){if(e[n])throw e[n];return e[t]}))},i=new Promise((function(t){l=function(){t(r)},l.r=0;var a=function(e){e!==s&&!f.has(e)&&(f.add(e),e&&!e.d&&(l.r++,e.push(l)))};u.map((function(t){t[e](a)}))}));return l.r?i:r()}),(function(e){e?c(v[n]=e):d(h),l(s)})),s&&(s.d=0)}}(),function(){var e=[];a.O=function(t,n,l,o){if(!n){var r=1/0;for(d=0;d<e.length;d++){n=e[d][0],l=e[d][1],o=e[d][2];for(var i=!0,s=0;s<n.length;s++)(!1&o||r>=o)&&Object.keys(a.O).every((function(e){return a.O[e](n[s])}))?n.splice(s--,1):(i=!1,o<r&&(r=o));if(i){e.splice(d--,1);var u=l();void 0!==u&&(t=u)}}return t}o=o||0;for(var d=e.length;d>0&&e[d-1][2]>o;d--)e[d]=e[d-1];e[d]=[n,l,o]}}(),function(){a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,{a:t}),t}}(),function(){a.d=function(e,t){for(var n in t)a.o(t,n)&&!a.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}}(),function(){a.f={},a.e=function(e){return Promise.all(Object.keys(a.f).reduce((function(t,n){return a.f[n](e,t),t}),[]))}}(),function(){a.u=function(e){return"js/"+e+".6089d81e.js"}}(),function(){a.miniCssF=function(e){}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.hmd=function(e){return e=Object.create(e),e.children||(e.children=[]),Object.defineProperty(e,"exports",{enumerable:!0,set:function(){throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+e.id)}}),e}}(),function(){a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={},t="jfrv:";a.l=function(n,l,o,r){if(e[n])e[n].push(l);else{var i,s;if(void 0!==o)for(var u=document.getElementsByTagName("script"),d=0;d<u.length;d++){var c=u[d];if(c.getAttribute("src")==n||c.getAttribute("data-webpack")==t+o){i=c;break}}i||(s=!0,i=document.createElement("script"),i.charset="utf-8",i.timeout=120,a.nc&&i.setAttribute("nonce",a.nc),i.setAttribute("data-webpack",t+o),i.src=n),e[n]=[l];var f=function(t,a){i.onerror=i.onload=null,clearTimeout(h);var l=e[n];if(delete e[n],i.parentNode&&i.parentNode.removeChild(i),l&&l.forEach((function(e){return e(a)})),t)return t(a)},h=setTimeout(f.bind(null,void 0,{type:"timeout",target:i}),12e4);i.onerror=f.bind(null,i.onerror),i.onload=f.bind(null,i.onload),s&&document.head.appendChild(i)}}}(),function(){a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){a.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e}}(),function(){a.v=function(e,t,n,l){var o=fetch(a.p+""+n+".module.wasm");return"function"===typeof WebAssembly.instantiateStreaming?WebAssembly.instantiateStreaming(o,l).then((function(t){return Object.assign(e,t.instance.exports)})):o.then((function(e){return e.arrayBuffer()})).then((function(e){return WebAssembly.instantiate(e,l)})).then((function(t){return Object.assign(e,t.instance.exports)}))}}(),function(){a.p="/jfrv/"}(),function(){a.b=document.baseURI||self.location.href;var e={143:0};a.f.j=function(t,n){var l=a.o(e,t)?e[t]:void 0;if(0!==l)if(l)n.push(l[2]);else{var o=new Promise((function(a,n){l=e[t]=[a,n]}));n.push(l[2]=o);var r=a.p+a.u(t),i=new Error,s=function(n){if(a.o(e,t)&&(l=e[t],0!==l&&(e[t]=void 0),l)){var o=n&&("load"===n.type?"missing":n.type),r=n&&n.target&&n.target.src;i.message="Loading chunk "+t+" failed.\n("+o+": "+r+")",i.name="ChunkLoadError",i.type=o,i.request=r,l[1](i)}};a.l(r,s,"chunk-"+t,t)}},a.O.j=function(t){return 0===e[t]};var t=function(t,n){var l,o,r=n[0],i=n[1],s=n[2],u=0;if(r.some((function(t){return 0!==e[t]}))){for(l in i)a.o(i,l)&&(a.m[l]=i[l]);if(s)var d=s(a)}for(t&&t(n);u<r.length;u++)o=r[u],a.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return a.O(d)},n=self["webpackChunkjfrv"]=self["webpackChunkjfrv"]||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}();var n=a.O(void 0,[998],(function(){return a(5258)}));n=a.O(n)})();
//# sourceMappingURL=app.cea49279.js.map